<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="使用Android Studio对代码进行重构, 流水不腐小夏">
    <meta name="description" content="Liushuixiaoxia(流水不腐小夏) https://github.com/LiushuiXiaoxia">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>使用Android Studio对代码进行重构 | 流水不腐小夏</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">流水不腐小夏</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">流水不腐小夏</div>
        <div class="logo-desc">
            
            Liushuixiaoxia(流水不腐小夏) https://github.com/LiushuiXiaoxia
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/17.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">使用Android Studio对代码进行重构</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E4%BB%A3%E7%A0%81%E9%87%8D%E6%9E%84/">
                                <span class="chip bg-color">代码重构</span>
                            </a>
                        
                            <a href="/tags/Android-Studio%E9%87%8D%E6%9E%84/">
                                <span class="chip bg-color">Android Studio重构</span>
                            </a>
                        
                            <a href="/tags/Android-%E9%87%8D%E6%9E%84/">
                                <span class="chip bg-color">Android 重构</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" class="post-category">
                                工具使用
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2016-07-19
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="使用Android-Studio对代码进行重构"><a href="#使用Android-Studio对代码进行重构" class="headerlink" title="使用Android Studio对代码进行重构"></a>使用Android Studio对代码进行重构</h1><hr>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>2013年Google I/O大会上，谷歌推出新的Android开发环境——Android Studio，从此Android程序员有了新的选择，使用Android Studio进行App开发。AndroidStudio是一项全新的基于IntelliJ IDEA的Android开发环境。类似于Eclipse ADT插件，现在已经成为了官方推荐的ide，同时Eclipse不再进行更新。</p>
<p>软件开发中，经过几个版本迭代，不少程序员会觉的以前的代码架构可能不满足日益增长的需求，这时候都会想到了重构，关于重构网上也有不少用于的资料。</p>
<p><a href="http://blog.csdn.net/knightswarrior/article/details/9447815">重构资料</a></p>
<p>资料里面列举了如下几种方法，对代码进行重构。</p>
<span id="more"></span>

<pre class="line-numbers language-none"><code class="language-none">31天重构学习笔记01. 封装集合
31天重构学习笔记02. 移动方法
31天重构学习笔记03. 提升方法
31天重构学习笔记04. 降低方法
31天重构学习笔记05. 提升字段
31天重构学习笔记06. 降低字段
31天重构学习笔记07. 重命名（方法，类，参数）
31天重构学习笔记08. 使用委派代替继承
31天重构学习笔记09. 提取接口
31天重构学习笔记10. 提取方法
31天重构学习笔记11. 使用策略类
31天重构学习笔记12. 分解依赖
31天重构学习笔记13. 提取方法对象
31天重构学习笔记14. 分离职责
31天重构学习笔记15. 移除重复内容
31天重构学习笔记16. 封装条件
31天重构学习笔记17. 提取父类
31天重构学习笔记18. 使用条件判断代替异常
31天重构学习笔记19. 提取工厂类
31天重构学习笔记20. 提取子类
31天重构学习笔记21. 合并继承
31天重构学习笔记22. 分解方法
31天重构学习笔记23. 引入参数对象
31天重构学习笔记24. 分解复杂判断
31天重构学习笔记25. 引入契约式设计
31天重构学习笔记26. 避免双重否定
31天重构学习笔记27. 去除上帝类
31天重构学习笔记28. 为布尔方法命名
31天重构学习笔记29. 去除中间人对象
31天重构学习笔记30. 尽快返回
31天重构学习笔记31. 使用多态代替条件判断<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Android Studio是基于优秀的ide的，ide提供了丰富的功能，很方便的对代码进行重构，下图是我的Android Studio Refactor菜单，部分快捷键与默认快捷键不同是因为方便而修改的。</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//1.png" alt="Android Studio Refactor"></p>
<p>古人云『工欲善其事必先利其器』，所以在对代码进行重构前，需要详细了解Android Studio提供的功能，下面对AS(Android Studio，后面简称AS)菜单进行简单示例。</p>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>鼠标光标选中或者放在代码上，按下快捷键就可以弹出当前代码可以使用的功能。<br>如下所示：</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//1.gif" alt="如何使用"></p>
<h2 id="代码与操作示例"><a href="#代码与操作示例" class="headerlink" title="代码与操作示例"></a>代码与操作示例</h2><ul>
<li>ChangeSignature，改变函数签名，可以修改函数的名字，参数的顺序，参数的名字。</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 改变签名
void testChangeSignature(int second, int first) &#123;
    System.out.println(first + &quot;-&gt;&quot; + second);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//2.gif" alt="改变签名"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 改变签名
void testChangeSignature(int one, int two) &#123;
    System.out.println(one + &quot;-&gt;&quot; + two);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改前参数依次是second、first，修改是one、two。</p>
<ul>
<li>ChangeClassSignatuere，改变类的签名，可以修改类的泛型签名</li>
</ul>
<p>Before：</p>
<pre class="line-numbers language-none"><code class="language-none">    &#x2F;&#x2F; 改变类的签名
    void testChangeClassSignatuere() &#123;
        String second &#x3D; &quot;second&quot;;
        int first &#x3D; 100;
        new ChangeClassSignatuere(second, first);
    &#125;
    
&#x2F;&#x2F; **********************分割线*******************************    
    
public class ChangeClassSignatuere &#123;

    private int first;
    private String second;

    public ChangeClassSignatuere(String second, int first) &#123;
        this.first &#x3D; first;
        this.second &#x3D; second;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;ChangeClassSignatuere&#123;&quot; +
                &quot;second&#x3D;&#39;&quot; + second + &#39;\&#39;&#39; +
                &quot;,first&#x3D;&quot; + first +
                &#39;&#125;&#39;;
    &#125;
&#125;    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//3.gif" alt="改变类签名"></p>
<p>After：</p>
<pre class="line-numbers language-none"><code class="language-none">    &#x2F;&#x2F; 改变类的签名
    void testChangeClassSignatuere() &#123;
        String second &#x3D; &quot;second&quot;;
        int first &#x3D; 100;
        new ChangeClassSignatuere&lt;Activity&gt;(second, first);
    &#125;
&#x2F;&#x2F; **********************分割线*******************************    

public class ChangeClassSignatuere&lt;A&gt; &#123;

    private int first;
    private String second;

    public ChangeClassSignatuere(String second, int first) &#123;
        this.first &#x3D; first;
        this.second &#x3D; second;
    &#125;

    @Override
    public String toString() &#123;
        return &quot;ChangeClassSignatuere&#123;&quot; +
                &quot;second&#x3D;&#39;&quot; + second + &#39;\&#39;&#39; +
                &quot;,first&#x3D;&quot; + first +
                &#39;&#125;&#39;;
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>修改匿名类为内部类</li>
</ul>
<p>Before：</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 匿名类改成内部类
void testConvertAnonymousToInner() &#123;
    View.OnClickListener clickListener &#x3D; new View.OnClickListener() &#123;

        @Override
        public void onClick(View v) &#123;
            System.out.println(&quot;onClick&quot;);
        &#125;
    &#125;;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//4.gif" alt="改变类签名"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 匿名类改成内部类
void testConvertAnonymousToInner() &#123;

    View.OnClickListener clickListener &#x3D; new Abc123();
&#125;

private static class Abc123 implements View.OnClickListener &#123;

    @Override
    public void onClick(View v) &#123;
        System.out.println(&quot;onClick&quot;);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这个是我最喜欢的一个功能，有时候匿名类刚刚开始逻辑很简单，过不了多久逻辑太多，就可以使用快捷键变成一个内部类。</p>
<ul>
<li>ConvertToInstanceMethod，修改一个方法变成成员方法</li>
</ul>
<p>Befor:</p>
<pre class="line-numbers language-none"><code class="language-none">    &#x2F;&#x2F; 变成成员方法
    void testConvertToInstanceMethod() &#123;
        TestClass.convertToInstanceMethod(this, &quot;test&quot;);
    &#125;
    
public class TestClass &#123;

    static void convertToInstanceMethod(RefactorDemo demo, String string) &#123;
        System.out.println(&quot;convertToInstanceMethod &#x3D; &quot; + demo);
        System.out.println(&quot;convertToInstanceMethod &#x3D; &quot; + string);
    &#125;
&#125;    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 变成成员方法
void testConvertToInstanceMethod() &#123;
    this.convertToInstanceMethod(&quot;test&quot;);
&#125;

void convertToInstanceMethod(String string) &#123;
    System.out.println(&quot;convertToInstanceMethod &#x3D; &quot; + this);
    System.out.println(&quot;convertToInstanceMethod &#x3D; &quot; + string);
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在修改前，调用convertToInstanceMethod方法，第一个参数相是RefactorDemo，传递是this， 修改后就那个方法直接移动到本类中。</p>
<ul>
<li>Copy，复制一个类</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">    &#x2F;&#x2F; 复制一个类
    void testCopy() &#123;
        new FirstClass();
    &#125;
    
public class FirstClass implements Serializable &#123;

    public String first;

    @Override
    public String toString() &#123;
        return &quot;FirstClass&#123;&quot; +
                &quot;first&#x3D;&#39;&quot; + first + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//5.gif" alt="复制一个类"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">public class SecondClass implements Serializable &#123;

    public String first;

    @Override
    public String toString() &#123;
        return &quot;SecondClass&#123;&quot; +
                &quot;first&#x3D;&#39;&quot; + first + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>EncapsulateFields，压缩一个字段，间接访问</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">String filed &#x3D; &quot;filed&quot;;

&#x2F;&#x2F; 压缩一个字段，间接访问
void testEncapsulateFields() &#123;
    System.out.println(filed);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">private String filed &#x3D; &quot;filed&quot;;

&#x2F;&#x2F; 压缩一个字段，间接访问
void testEncapsulateFields() &#123;
    System.out.println(getFiled());
&#125;

public String getFiled() &#123;
    return filed;
&#125;

public void setFiled(String filed) &#123;
    this.filed &#x3D; filed;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>相当于简介访问一个field，自动生成setter和getter。</p>
<ul>
<li>GenerifyRefactoring，泛型重构</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 泛型重构
void testGenerifyRefactoring() &#123;
    List list &#x3D; new ArrayList();
    list.add(&quot;one&quot;);
    list.add(&quot;two&quot;);
    list.add(&quot;three&quot;);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 泛型重构
void testGenerifyRefactoring() &#123;
    List&lt;String&gt; list &#x3D; new ArrayList&lt;String&gt;();
    list.add(&quot;one&quot;);
    list.add(&quot;two&quot;);
    list.add(&quot;three&quot;);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>自动添加泛型的参数。</p>
<ul>
<li>Inline，内联函数</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 内联
void testInline() &#123;
    int a &#x3D; 100;
    int b &#x3D; 200;
    System.out.println(add(a, b));
&#125;

int add(int a, int b) &#123;
    return a + b;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//6.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 内联
void testInline() &#123;
    int a &#x3D; 100;
    int b &#x3D; 200;
    System.out.println(a + b);
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>原先需要调用一个函数的地方，直接把那个函数里面的代码复制过来。</p>
<ul>
<li>InvertBoolean，重构Boolean</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 重构Boolean
void testInvertBoolean() &#123;
    System.out.println(checkPaswd(null));
    System.out.println(checkPaswd(&quot;&quot;));
    System.out.println(checkPaswd(&quot;admin&quot;));
&#125;

boolean checkPaswd(String passwd) &#123;
    if (passwd !&#x3D; null &amp;&amp; passwd.length() !&#x3D; 0) &#123;
        return true;
    &#125;
    return false;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//7.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 重构Boolean
void testInvertBoolean() &#123;
    System.out.println(checkPaswd(null));
    System.out.println(checkPaswd(&quot;&quot;));
    System.out.println(checkPaswd(&quot;admin&quot;));
&#125;

boolean checkPaswd(String passwd) &#123;
    return passwd !&#x3D; null &amp;&amp; passwd.length() !&#x3D; 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<ul>
<li>MakeClassStatic，使类变成静态的</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 使类变成静态的
void testMakeClassStatic() &#123;
    new MyClass().fun();
&#125;

String myClassField &#x3D; &quot;abc&quot;;

class MyClass &#123;
    void fun() &#123;
        System.out.println(&quot;myClassField &#x3D; &quot; + myClassField);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//8.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 使类变成静态的
void testMakeClassStatic() &#123;
    new MyClass(myClassField).fun();
&#125;

String myClassField &#x3D; &quot;abc&quot;;

static class MyClass &#123;
    private String myClassField;

    public MyClass(String myClassField) &#123;
        this.myClassField &#x3D; myClassField;
    &#125;

    void fun() &#123;
        System.out.println(&quot;myClassField &#x3D; &quot; + myClassField);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>修改前需要调用外部内的成员变量myClassField，实际编译过后MyClass的class是持有外部类的对象，这样才能访问myClassField，通过重构，使得myClassField通过构造方法传入进去，然后再在fun方法中使用，这样重构会减少类的依赖。</p>
<ul>
<li>MakeMethodStatic，使方法变成静态的</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 使方法变成静态的
void testMakeMethodStatic() &#123;
    myFun();
&#125;

void myFun() &#123;
    System.out.println(&quot;myFun&quot;);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 使方法变成静态的
void testMakeMethodStatic() &#123;
    myFun();
&#125;

static void myFun() &#123;
    System.out.println(&quot;myFun&quot;);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>Move，移动一个类</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 移动一个类
void testMove() &#123;
    new MoveClass().fun();
&#125;

static class MoveClass &#123;

    String movde;

    @Override
    public String toString() &#123;
        return &quot;MoveClass&#123;&quot; +
                &quot;movde&#x3D;&#39;&quot; + movde + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;

    void fun() &#123;
        System.out.println(this);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//9.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">    &#x2F;&#x2F; 移动一个类
    void testMove() &#123;
        new MoveClassxxxxxx().fun();
    &#125;
    
class MoveClassxxxxxx &#123;

    String movde;

    @Override
    public String toString() &#123;
        return &quot;MoveClass&#123;&quot; +
                &quot;movde&#x3D;&#39;&quot; + movde + &#39;\&#39;&#39; +
                &#39;&#125;&#39;;
    &#125;

    void fun() &#123;
        System.out.println(this);
    &#125;
&#125;    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>PullMenmberUp，上移</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">public class Base &#123;

    public String baseString;

    public Base(String baseString) &#123;
        this.baseString &#x3D; baseString;
    &#125;

    public void funBase() &#123;
        System.out.println(baseString);
    &#125;
&#125;
public class Sub extends Base &#123;


    public Sub(String baseString) &#123;
        super(baseString);
    &#125;

    public void funSub() &#123;
        System.out.println(baseString);
    &#125;
&#125;

    &#x2F;&#x2F; 上移
    void testPullMenmberUp() &#123;
        new Sub(&quot;base&quot;).funSub();
    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//10.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">public class Base &#123;

    public String baseString;

    public Base(String baseString) &#123;
        this.baseString &#x3D; baseString;
    &#125;

    public void funBase() &#123;
        System.out.println(baseString);
    &#125;

    public void funSub() &#123;
        System.out.println(baseString);
    &#125;
&#125;

public class Sub extends Base &#123;


    public Sub(String baseString) &#123;
        super(baseString);
    &#125;

&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>实际上就是把子类中的方法移动到父类中。</p>
<ul>
<li>PullMenmberDown，下移</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">public class Base &#123;

    public String baseString;

    public Base(String baseString) &#123;
        this.baseString &#x3D; baseString;
    &#125;

    public void funBase() &#123;
        System.out.println(baseString);
    &#125;
&#125;
public class Sub extends Base &#123;


    public Sub(String baseString) &#123;
        super(baseString);
    &#125;

    public void funSub() &#123;
        System.out.println(baseString);
    &#125;
&#125;
    &#x2F;&#x2F; 下移
    void testPullMenmberDown() &#123;
        new Sub(&quot;base&quot;).funBase();
    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">public class Base &#123;

    public String baseString;

    public Base(String baseString) &#123;
        this.baseString &#x3D; baseString;
    &#125;

&#125;

public class Sub extends Base &#123;

    public Sub(String baseString) &#123;
        super(baseString);
    &#125;

    public void funSub() &#123;
        System.out.println(baseString);
    &#125;

    public void funBase() &#123;
        System.out.println(baseString);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>实际上就是把父类中的方法移动到子类中。</p>
<ul>
<li>Rename，重命名</li>
</ul>
<p>这个功能也是我最喜欢的，只要选择重命名一个对象或者资源，所有使用到这个对象或者资源的地方，都会进行重新命名。</p>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 重命名
void testRename() &#123;
    String first &#x3D; &quot;second&quot;;
    System.out.println(first);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//11.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 重命名
void testRename() &#123;
    String second &#x3D; &quot;second&quot;;
    System.out.println(second);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ReplaceConstructorWithBuilder，构造方法变成builder</li>
</ul>
<p>还在羡慕Picasso，Fresco人性化调用方式吗？很简单，通过这个功能就可以快速生成代码</p>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">public class MyAlertDialog &#123;

    private String title;
    private String message;
    private String okButton;
    private String cancelButton;

    public MyAlertDialog(String title, String message, String okButton, String cancelButton) &#123;
        this.title &#x3D; title;
        this.message &#x3D; message;
        this.okButton &#x3D; okButton;
        this.cancelButton &#x3D; cancelButton;
    &#125;
&#125;    
    &#x2F;&#x2F; 构造方法变成builder
    void testReplaceConstructorWithBuilder() &#123;
        new MyAlertDialog(&quot;title&quot;, &quot;message&quot;, &quot;ok&quot;, &quot;cancel&quot;).show();
    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//12.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">    &#x2F;&#x2F; 构造方法变成builder
    void testReplaceConstructorWithBuilder() &#123;
        new MyAlertDialog.Builder()
                .setTitle(&quot;title&quot;)
                .setMessage(&quot;message&quot;)
                .setOkButton(&quot;ok&quot;)
                .setCancelButton(&quot;cancel&quot;)
                .createMyAlertDialog()
                .show();
    &#125;
    
public static class Builder &#123;
    private String title;
    private String message;
    private String okButton;
    private String cancelButton;

    public Builder setTitle(String title) &#123;
        this.title &#x3D; title;
        return this;
    &#125;

    public Builder setMessage(String message) &#123;
        this.message &#x3D; message;
        return this;
    &#125;

    public Builder setOkButton(String okButton) &#123;
        this.okButton &#x3D; okButton;
        return this;
    &#125;

    public Builder setCancelButton(String cancelButton) &#123;
        this.cancelButton &#x3D; cancelButton;
        return this;
    &#125;

    public MyAlertDialog createMyAlertDialog() &#123;
        return new MyAlertDialog(title, message, okButton, cancelButton);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ReplaceConstructorWithFactory，构造方法变成工程方法</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 构造方法变成工程方法
void testReplaceConstructorWithFactory() &#123;
    new MyAlertDialog(&quot;title&quot;, &quot;message&quot;, &quot;ok&quot;, &quot;cancel&quot;).show();
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//13.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">    &#x2F;&#x2F; 构造方法变成工程方法
    void testReplaceConstructorWithFactory() &#123;
        MyAlertDialog.newInstance(&quot;title&quot;, &quot;message&quot;, &quot;ok&quot;, &quot;cancel&quot;)
                .show();
    &#125;
public class MyAlertDialog &#123;    
    private MyAlertDialog(String title, String message, String okButton, String cancelButton) &#123;
        this.title &#x3D; title;
        this.message &#x3D; message;
        this.okButton &#x3D; okButton;
        this.cancelButton &#x3D; cancelButton;
    &#125;

    public static MyAlertDialog newInstance(String title, String message, String okButton, String cancelButton) &#123;
        return new MyAlertDialog(title, message, okButton, cancelButton);
    &#125;
&#125;    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过上面代码发现，如果构造方法变成了工厂方式，那么它的构造参数是private的，这样调用者只能通过工厂方式来生成对象。</p>
<ul>
<li>ReplaceInheritanceWithDelegation，代理代替继承</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">public abstract class AbsClass &#123;

    public abstract void sayHello();
&#125;

public class ExtClass extends AbsClass &#123;

    @Override
    public void sayHello() &#123;
        System.out.println(&quot;hello&quot;);
    &#125;
&#125;
    &#x2F;&#x2F; 代理代替继承
    void testReplaceInheritanceWithDelegation() &#123;
        new ExtClass().sayHello();
    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//14.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">public class ExtClass &#123;

    private final AbsClassImpl abs &#x3D; new AbsClassImpl();

    public void sayHello() &#123;
        abs.sayHello();
    &#125;

    private class AbsClassImpl extends AbsClass &#123;
        @Override
        public void sayHello() &#123;
            System.out.println(&quot;hello&quot;);
        &#125;
    &#125;
&#125;

    &#x2F;&#x2F; 代理代替继承
    void testReplaceInheritanceWithDelegation() &#123;
        new ExtClass().sayHello();
    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>书上说过，组合由于继承大概说的就是这个意思。</p>
<ul>
<li>SafeDelete，安全删除</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 安全删除
void testSafeDelete() &#123;
    String unUsedString &#x3D; &quot;abc&quot;;

    unUsedString &#x3D; getUnUsedString();
    System.out.println(new Date());
&#125;

public String getUnUsedString() &#123;
    return unUsedString;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 安全删除
void testSafeDelete() &#123;
    System.out.println(new Date());
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>这个比较简单，如果某个变量没有使用，那么直接直接删除所有引用这个变量的地方。</p>
<ul>
<li>WrapReturnValue，封装返回值</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 封装返回值
void testWrapReturnValue() &#123;
    System.out.println(getUserName());
&#125;

private String getUserName() &#123;
    return &quot;userName&quot;;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//15.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 包装下返回值
void testWrapReturnValue() &#123;
    System.out.println(getUserName().getValue());
&#125;

private UserInfo getUserName() &#123;
    return new UserInfo(&quot;userName&quot;);
&#125;

public class UserInfo &#123;
    private final String value;

    public UserInfo(String value) &#123;
        this.value &#x3D; value;
    &#125;

    public String getValue() &#123;
        return value;
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>RemoveMiddleMan，去除中间人</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 去除中间人
void testRemoveMiddleMan() &#123;
    OrderManager manager &#x3D; new OrderManager();
    manager.newOrder(&quot;new&quot;);
    manager.confirm(&quot;confir&quot;);
    manager.invalidOrder(&quot;invalid&quot;);
&#125;

public static class OrderManager &#123;
    private List&lt;String&gt; unProcessOrderList;
    private List&lt;String&gt; processedOrderList;

    public OrderManager() &#123;
        unProcessOrderList &#x3D; new ArrayList&lt;&gt;();
        processedOrderList &#x3D; new ArrayList&lt;&gt;();
    &#125;

    public void newOrder(String order) &#123;
        unProcessOrderList.add(order);
    &#125;

    public void confirm(String order) &#123;
        unProcessOrderList.remove(order);
        processedOrderList.add(order);
    &#125;

    public void invalidOrder(String order) &#123;
        processedOrderList.remove(order);
    &#125;

    public void display() &#123;
        System.out.println(unProcessOrderList);
        System.out.println(processedOrderList);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//16.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 去除中间人
void testRemoveMiddleMan() &#123;
    OrderManager manager &#x3D; new OrderManager();
    manager.getUnProcessOrderList().add(&quot;new&quot;);
    manager.confirm(&quot;confir&quot;);
    manager.getProcessedOrderList().remove(&quot;invalid&quot;);
&#125;

public static class OrderManager &#123;
    private List&lt;String&gt; unProcessOrderList;
    private List&lt;String&gt; processedOrderList;

    public OrderManager() &#123;
        unProcessOrderList &#x3D; new ArrayList&lt;&gt;();
        processedOrderList &#x3D; new ArrayList&lt;&gt;();
    &#125;

    public void confirm(String order) &#123;
        unProcessOrderList.remove(order);
        processedOrderList.add(order);
    &#125;

    public void display() &#123;
        System.out.println(unProcessOrderList);
        System.out.println(processedOrderList);
    &#125;

    public List&lt;String&gt; getUnProcessOrderList() &#123;
        return unProcessOrderList;
    &#125;

    public List&lt;String&gt; getProcessedOrderList() &#123;
        return processedOrderList;
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>用途就是，原先OrderManager持有一个List来保存Order，调用方直接使用OrderManager来处理订单，去除中间人的意思就是说，调用法直接获取保存Order的容器，调用方直接自己控制容器。</p>
<h2 id="代码抽取"><a href="#代码抽取" class="headerlink" title="代码抽取"></a>代码抽取</h2><p>代码抽取在实际使用当中非常有用。</p>
<ul>
<li>ExtraMethod，抽取一个方法</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取一个方法
void testExtraMethod() &#123;
    Map&lt;String, Integer&gt; map &#x3D; new HashMap&lt;&gt;();
    map.put(&quot;one&quot;, 1);
    map.put(&quot;two&quot;, 2);
    map.put(&quot;three&quot;, 2);

    System.out.println(map);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//17.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取一个方法
void testExtraMethod() &#123;
    Map&lt;String, Integer&gt; map &#x3D; initMap();

    System.out.println(map);
&#125;

@NonNull
private Map&lt;String, Integer&gt; initMap() &#123;
    Map&lt;String, Integer&gt; map &#x3D; new HashMap&lt;&gt;();
    map.put(&quot;one&quot;, 1);
    map.put(&quot;two&quot;, 2);
    map.put(&quot;three&quot;, 2);
    return map;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<ul>
<li>ExtraMethodObject，抽取一个方法到一个对象中</li>
</ul>
<p>和上面那个差不多，只不过把方法移动到另外一个类中。</p>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取一个方法到一个对象中
void testExtraMethodObject() &#123;
    Map&lt;String, Integer&gt; map &#x3D; new HashMap&lt;&gt;();
    map.put(&quot;one&quot;, 1);
    map.put(&quot;two&quot;, 22);
    map.put(&quot;three&quot;, 33);

    System.out.println(map);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取一个方法到一个对象中
void testExtraMethodObject() &#123;
    Map&lt;String, Integer&gt; map &#x3D; MapUtil.invoke();
    System.out.println(map);
&#125;

private static class MapUtil &#123;
    private static Map&lt;String, Integer&gt; invoke() &#123;
        Map&lt;String, Integer&gt; map &#x3D; new HashMap&lt;&gt;();
        map.put(&quot;one&quot;, 1);
        map.put(&quot;two&quot;, 22);
        map.put(&quot;three&quot;, 33);
        return map;
    &#125;
&#125;   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<ul>
<li>ExtractParameterObject，抽取若干参数成一个类</li>
</ul>
<p>这个比较使用，有时候一个方法参数太多，可以把这些参数合并成一个类。</p>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取若干参数成一个类
void testExtractParameterObject() &#123;
    print(100, 200);
&#125;

&#x2F;&#x2F; widht,height --&gt; Size Class
void print(int width, int height) &#123;
    System.out.println(&quot;width &#x3D; &quot; + width + &quot;, height &#x3D; &quot; + height);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//18.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">    &#x2F;&#x2F; 抽取若干参数成一个类
    void testExtractParameterObject() &#123;
        print(new Size(100, 200));
    &#125;

    &#x2F;&#x2F; widht,height --&gt; Size Class
    void print(Size size) &#123;
        System.out.println(&quot;width &#x3D; &quot; + size.getWidth() + &quot;, height &#x3D; &quot; + size.getHeight());
    &#125;
    
    
public class Size &#123;
    private final int width;
    private final int height;

    public Size(int width, int height) &#123;
        this.width &#x3D; width;
        this.height &#x3D; height;
    &#125;

    public int getWidth() &#123;
        return width;
    &#125;

    public int getHeight() &#123;
        return height;
    &#125;
&#125;    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<ul>
<li>ExtractSuperclass，抽取到父类</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取到父类
void testExtractSuperclass() &#123;
    sendEvent(&quot;login_success&quot;);
&#125;

public void sendEvent(Object event) &#123;
    &#x2F;&#x2F; EventBus.getDefault().send(event);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//19.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">public class BaseExtractDemo &#123;
    public void sendEvent(Object event) &#123;
        &#x2F;&#x2F; EventBus.getDefault().send(event);
    &#125;
&#125;

public class ExtractDemo extends BaseExtractDemo &#123;
    &#x2F;&#x2F; 抽取到父类
    void testExtractSuperclass() &#123;
        sendEvent(&quot;login_success&quot;);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ExtractConstant，抽取常量</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取常量
void testExtractConstant() &#123;
    String email &#x3D; &quot;admin@123.com&quot;;
    String passwd &#x3D; &quot;1qaz2wsx&quot;;

    Bundle bundle &#x3D; new Bundle();
    bundle.putString(&quot;email&quot;, email);
    bundle.putString(&quot;passwd&quot;, passwd);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//20.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">public static final String KEY_EMAIL &#x3D; &quot;email&quot;;
public static final String KEY_PASSWD &#x3D; &quot;passwd&quot;;

&#x2F;&#x2F; 抽取常量
void testExtractConstant() &#123;
    String email &#x3D; &quot;admin@123.com&quot;;
    String passwd &#x3D; &quot;1qaz2wsx&quot;;

    Bundle bundle &#x3D; new Bundle();
    bundle.putString(KEY_EMAIL, email);
    bundle.putString(KEY_PASSWD, passwd);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ExtractField，抽取成成员变量</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取成成员变量
void testExtractField() &#123;
    String testExtractField &#x3D;  &quot;testExtractField&quot;;
    System.out.println(testExtractField);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">private String testExtractField;

&#x2F;&#x2F; 抽取成成员变量
void testExtractField() &#123;
    testExtractField &#x3D; &quot;testExtractField&quot;;
    System.out.println(testExtractField);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ExtractVariable，抽取成变量</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取成变量
void testExtractVariable() &#123;
    System.out.println(&quot;long name &#x3D; &quot; + getLoooooooooooooooooooooooooooooooooooooooooooooooooooooongName());
&#125;

String getLoooooooooooooooooooooooooooooooooooooooooooooooooooooongName() &#123;
    return &quot;getLoooooooooooooooooooooooooooooooooooooooooooooooooooooongName&quot;;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//21.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取成变量
void testExtractVariable() &#123;
    String name &#x3D; getLoooooooooooooooooooooooooooooooooooooooooooooooooooooongName();
    System.out.println(&quot;long name &#x3D; &quot; + name);
&#125;

String getLoooooooooooooooooooooooooooooooooooooooooooooooooooooongName() &#123;
    return &quot;getLoooooooooooooooooooooooooooooooooooooooooooooooooooooongName&quot;;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>有时候，一行代码写的很长，可以使用这个方法，对代码进行重构。</p>
<ul>
<li>ExtractParameter，抽取成方法的参数</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取成方法的参数
void testExtractParameter() &#123;
    printHelloString();
&#125;

private void printHelloString() &#123;
    String str &#x3D; &quot;printHello&quot;;
    System.out.println(str);
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//22.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 抽取成方法的参数
void testExtractParameter() &#123;
    String str &#x3D; &quot;printHello&quot;;
    printStringAndLength(str);
&#125;

private void printStringAndLength(String paramStr) &#123;
    System.out.println(paramStr + &quot; -&gt; &quot; + paramStr.length());
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Android资源重构"><a href="#Android资源重构" class="headerlink" title="Android资源重构"></a>Android资源重构</h2><ul>
<li>ExtractLayout，布局文件抽取</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;
&lt;android.support.design.widget.CoordinatorLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;
    xmlns:app&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res-auto&quot;
    android:layout_width&#x3D;&quot;match_parent&quot;
    android:layout_height&#x3D;&quot;match_parent&quot;
    android:fitsSystemWindows&#x3D;&quot;true&quot;&gt;

    &lt;android.support.design.widget.AppBarLayout
        android:layout_width&#x3D;&quot;match_parent&quot;
        android:layout_height&#x3D;&quot;wrap_content&quot;
        android:theme&#x3D;&quot;@style&#x2F;AppTheme.AppBarOverlay&quot;&gt;

        &lt;android.support.v7.widget.Toolbar
            android:id&#x3D;&quot;@+id&#x2F;toolbar&quot;
            android:layout_width&#x3D;&quot;match_parent&quot;
            android:layout_height&#x3D;&quot;?attr&#x2F;actionBarSize&quot;
            android:background&#x3D;&quot;?attr&#x2F;colorPrimary&quot;
            app:popupTheme&#x3D;&quot;@style&#x2F;AppTheme.PopupOverlay&quot; &#x2F;&gt;

    &lt;&#x2F;android.support.design.widget.AppBarLayout&gt;

    &lt;include layout&#x3D;&quot;@layout&#x2F;content_main&quot; &#x2F;&gt;

    &lt;android.support.design.widget.FloatingActionButton
        android:id&#x3D;&quot;@+id&#x2F;fab&quot;
        android:layout_width&#x3D;&quot;wrap_content&quot;
        android:layout_height&#x3D;&quot;wrap_content&quot;
        android:layout_gravity&#x3D;&quot;bottom|end&quot;
        android:layout_margin&#x3D;&quot;@dimen&#x2F;fab_margin&quot;
        android:src&#x3D;&quot;@android:drawable&#x2F;ic_dialog_email&quot; &#x2F;&gt;

&lt;&#x2F;android.support.design.widget.CoordinatorLayout&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//23.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;
&lt;android.support.design.widget.CoordinatorLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;
    android:layout_width&#x3D;&quot;match_parent&quot;
    android:layout_height&#x3D;&quot;match_parent&quot;
    android:fitsSystemWindows&#x3D;&quot;true&quot;&gt;

    &lt;include layout&#x3D;&quot;@layout&#x2F;view_top&quot; &#x2F;&gt;

    &lt;include layout&#x3D;&quot;@layout&#x2F;content_main&quot; &#x2F;&gt;

    &lt;include layout&#x3D;&quot;@layout&#x2F;view_button&quot; &#x2F;&gt;

&lt;&#x2F;android.support.design.widget.CoordinatorLayout&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>ExtractStyle，样式抽取</li>
</ul>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;TextView
    android:layout_width&#x3D;&quot;wrap_content&quot;
    android:layout_height&#x3D;&quot;wrap_content&quot;
    android:text&#x3D;&quot;Hello World!&quot;
    android:textAlignment&#x3D;&quot;center&quot;
    android:textColor&#x3D;&quot;#f00ff0&quot;
    android:textSize&#x3D;&quot;18sp&quot;
    android:textStyle&#x3D;&quot;bold&quot;
    android:typeface&#x3D;&quot;normal&quot; &#x2F;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:</p>
<p><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//24.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;TextView
    android:layout_width&#x3D;&quot;wrap_content&quot;
    android:layout_height&#x3D;&quot;wrap_content&quot;
    android:text&#x3D;&quot;Hello World!&quot;
    style&#x3D;&quot;@style&#x2F;my_textview_style&quot; &#x2F;&gt;
    
&lt;style name&#x3D;&quot;my_textview_style&quot;&gt;
    &lt;item name&#x3D;&quot;android:textAlignment&quot;&gt;center&lt;&#x2F;item&gt;
    &lt;item name&#x3D;&quot;android:textColor&quot;&gt;#f00ff0&lt;&#x2F;item&gt;
    &lt;item name&#x3D;&quot;android:textSize&quot;&gt;18sp&lt;&#x2F;item&gt;
    &lt;item name&#x3D;&quot;android:textStyle&quot;&gt;bold&lt;&#x2F;item&gt;
    &lt;item name&#x3D;&quot;android:typeface&quot;&gt;normal&lt;&#x2F;item&gt;
&lt;&#x2F;style&gt;        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="综合示例"><a href="#综合示例" class="headerlink" title="综合示例"></a>综合示例</h1><p>通过一个示例演示怎么样重构代码，示例是一个Activity里面有个RecyclerView，然后重构代码，演示怎么样分离Adapter,ViewHolder等。</p>
<p>Before:</p>
<pre class="line-numbers language-none"><code class="language-none">public class StartActivity extends AppCompatActivity &#123;

    @Override
    protected void onCreate(Bundle savedInstanceState) &#123;
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_start);
        Toolbar toolbar &#x3D; (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        RecyclerView recyclerView &#x3D; (RecyclerView) findViewById(R.id.recyclerView);
        recyclerView.setLayoutManager(new LinearLayoutManager(this));

        final List&lt;String&gt; data &#x3D; new ArrayList&lt;&gt;();
        for (int i &#x3D; 0; i &lt; 100; i++) &#123;
            data.add(&quot;Text &quot; + (i + 1));
        &#125;

        recyclerView.setAdapter(new RecyclerView.Adapter&lt;MyViewHolder&gt;() &#123;

            @Override
            public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;
                LayoutInflater layoutInflater &#x3D; (LayoutInflater) parent.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                return new MyViewHolder(layoutInflater.inflate(android.R.layout.simple_list_item_1, parent, false));
            &#125;

            @Override
            public void onBindViewHolder(MyViewHolder holder, int position) &#123;
                holder.bind(data.get(position));
            &#125;

            @Override
            public int getItemCount() &#123;
                return data.size();
            &#125;
        &#125;);
    &#125;

    class MyViewHolder extends RecyclerView.ViewHolder &#123;

        TextView textView;

        public MyViewHolder(View itemView) &#123;
            super(itemView);
            textView &#x3D; (TextView) itemView.findViewById(android.R.id.text1);
        &#125;

        void bind(String text) &#123;
            textView.setText(text);
        &#125;
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Gif:<br><img src="https://raw.githubusercontent.com/LiushuiXiaoxia/AndroidStudioRefactor/master//100.gif"></p>
<p>After:</p>
<pre class="line-numbers language-none"><code class="language-none">public class StartActivity extends AppCompatActivity &#123;

    private RecyclerView recyclerView;
    private List&lt;String&gt; data;

    @Override
    protected void onCreate(Bundle savedInstanceState) &#123;
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_start);
        Toolbar toolbar &#x3D; (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        initData();
        initView();
    &#125;

    private void initData() &#123;
        data &#x3D; new ArrayList&lt;&gt;();
        for (int i &#x3D; 0; i &lt; 100; i++) &#123;
            data.add(&quot;Text &quot; + (i + 1));
        &#125;
    &#125;

    private void initView() &#123;
        recyclerView &#x3D; (RecyclerView) findViewById(R.id.recyclerView);
        recyclerView.setLayoutManager(new LinearLayoutManager(this));
        recyclerView.setAdapter(new MyViewHolderAdapter(data));
    &#125;
&#125;

class MyViewHolderAdapter extends RecyclerView.Adapter&lt;MyViewHolder&gt; &#123;

    private List&lt;String&gt; data;

    public MyViewHolderAdapter(List&lt;String&gt; data) &#123;
        this.data &#x3D; data;
    &#125;

    @Override
    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;
        return MyViewHolder.newInstance(parent);
    &#125;

    @Override
    public void onBindViewHolder(MyViewHolder holder, int position) &#123;
        holder.bind(data.get(position));
    &#125;

    @Override
    public int getItemCount() &#123;
        return data.size();
    &#125;
&#125;


class MyViewHolder extends RecyclerView.ViewHolder &#123;

    public static final int LAYOUT_ID &#x3D; android.R.layout.simple_list_item_1;

    @NonNull
    static MyViewHolder newInstance(ViewGroup parent) &#123;
        Context context &#x3D; parent.getContext();
        LayoutInflater layoutInflater &#x3D; (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        return new MyViewHolder(layoutInflater.inflate(LAYOUT_ID, parent, false));
    &#125;

    TextView textView;

    public MyViewHolder(View itemView) &#123;
        super(itemView);
        textView &#x3D; (TextView) itemView.findViewById(android.R.id.text1);
    &#125;

    void bind(String text) &#123;
        textView.setText(text);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>至此，Android Studio的重构功能讲解完成，由于Android Studio更新很快，很多功能还需要自己去发掘。</p>
<p>『君子生非异也，善假于物也』，好好使用工具，可以偷个懒。</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">流水不腐小夏</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://mycommons.cn/2016/07/19/Android-Studio-Refactor/">https://mycommons.cn/2016/07/19/Android-Studio-Refactor/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">流水不腐小夏</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E4%BB%A3%E7%A0%81%E9%87%8D%E6%9E%84/">
                                    <span class="chip bg-color">代码重构</span>
                                </a>
                            
                                <a href="/tags/Android-Studio%E9%87%8D%E6%9E%84/">
                                    <span class="chip bg-color">Android Studio重构</span>
                                </a>
                            
                                <a href="/tags/Android-%E9%87%8D%E6%9E%84/">
                                    <span class="chip bg-color">Android 重构</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/images/alipay.jpeg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/images/wechat_pay.jpeg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    
        <div class="disqus-card card" data-aos="fade-up">
    <div id="disqus_thread" class="card-content">
        <noscript>Please enable JavaScript to view the
            <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
    </div>
</div>

<script type="text/javascript">
    disqus_config = function () {
        this.page.url = 'https://mycommons.cn/2016/07/19/Android-Studio-Refactor/';
        this.page.identifier = '/2016/07/19/Android-Studio-Refactor/';
        this.page.title = '使用Android Studio对代码进行重构';
    };
    let disqus_shortname = 'mycommons-cn';

    (function () { // DON'T EDIT BELOW THIS LINE
        let d = document, s = d.createElement('script');
        // 如：s.src = 'https://blinkfox.disqus.com/embed.js';
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2016/07/19/Android-Monkey/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/2.jpg" class="responsive-img" alt="Android Monkey整理">
                        
                        <span class="card-title">Android Monkey整理</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Android Monkey整理
简介Monkey是Android中的一个命令行工具，可以运行在模拟器里或实际设备中。它向系统发送伪随机的用户事件流(如按键输入、触摸屏输入、手势输入等)，实现对正在开发的应用程序进行压力测试。Monkey测
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2016-07-19
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Android%E6%B5%8B%E8%AF%95/" class="post-category">
                                    Android测试
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Android%E6%B5%8B%E8%AF%95/">
                        <span class="chip bg-color">Android测试</span>
                    </a>
                    
                    <a href="/tags/Android-Monkey/">
                        <span class="chip bg-color">Android Monkey</span>
                    </a>
                    
                    <a href="/tags/Monkey%E6%B5%8B%E8%AF%95/">
                        <span class="chip bg-color">Monkey测试</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2016/07/19/Mockito/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/19.jpg" class="responsive-img" alt="Mockito浅谈">
                        
                        <span class="card-title">Mockito浅谈</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Mockito浅谈
Mockito简介
什么是mock？在软件开发的世界之外, “mock”一词是指模仿或者效仿。 因此可以将“mock”理解为一个替身，替代者. 在软件开发中提及”mock”，通常理解为模拟对象或者Fake。

为什么需要
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2016-07-19
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Java%E6%B5%8B%E8%AF%95/" class="post-category">
                                    Java测试
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%B5%8B%E8%AF%95/">
                        <span class="chip bg-color">测试</span>
                    </a>
                    
                    <a href="/tags/Java%E6%B5%8B%E8%AF%95/">
                        <span class="chip bg-color">Java测试</span>
                    </a>
                    
                    <a href="/tags/Mockito/">
                        <span class="chip bg-color">Mockito</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2016-2021</span>
            
            <span id="year">2016</span>
            <a href="/about" target="_blank">流水不腐小夏</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/LiushuiXiaoxia" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:xiaqiulei@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?55458ffca1f60dd283f11b9a7f82b262";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
